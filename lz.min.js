(function(e){"use strict";function r(){this.pre&&this.pre(this._i);var e=this._list[this._i++];if(this._i>this.length)return t;for(var r=0;r<this._fn.length;r+=1){e=this._fn[r](e);if(e===n)return this._next()}return e}function i(e){if(!(this instanceof i))return new i(e);this._fn=[],this._i=0,this._list=e,this.length=e.length}var t={},n={};Object.defineProperty(Array.prototype,"lz",{value:function(){return new i(this)}});var s=i.prototype;s._r=function(e){return this._i=0,e},s._next=r,s.compact=function(){return this._value=null,this._fn.push(function(e){return e?e:n}),this},s.concat=function(e){var t=this.length;return this.length+=e.length,e instanceof i?this._fn.push(function(n){return this._i>t&&(n=e._next(),this._list.push(n)),n}.bind(this)):this._fn.push(function(n){return this._i>t&&(n=e[this._i-t-1],this._list.push(n)),n}.bind(this)),this},s.cycle=function(){return i.cycle(this._list)},s.drop=function(e){this._value=null;var n;while(e-->0){n=this._next();if(n===t)return this._value=[],this}return this._list=this._list.slice(this._i),this._i=0,this.length=this._list.length,this},s.dropWhile=function(e){this._value=null;var n;for(;;){n=this._next();if(n===t)return this._value=[],this;if(e(n)===!1)break}return this._list=this._list.slice(this._i-1),this._i=0,this.length=this._list.length,this},s.filter=function(e){return this._value=null,this._fn.push(function(t){return e(t)===!0?t:n}),this},s.flatten=function(e){return i.flatten(this.$(),e)},s.init=function(){var e=[],n,r=this.length;while(--r>0){n=this._next();if(n===t)break;e.push(n)}return this._list=this._value=e,this._fn=[],this._i=0,this.length=this._list.length,this},s.map=function(e){return this._value=null,this._fn.push(function(t){return e(t)}),this},s.of=function(e){return new i(e)},s.scanl=function(e){this._value=null;var t;return this._fn.push(function(n){return t=e(t,n)||n}),this},s.sort=function(e){return this._value=this._list=Array.prototype.sort.call(this._list,e),this},s.tail=function(){var e=[],n,r=this.length;this._next();while(--r>0){n=this._next();if(n===t)break;e.push(n)}return this._list=this._value=e,this._fn=[],this._i=0,this.length=this._list.length,this},s.take=function(e){var n=[],r;while(e-->0){r=this._next();if(r===t)break;n.push(r)}return this._list=this._value=n,this._fn=[],this._i=0,this.length=this._list.length,this},s.takeWhile=function(e){var n=[],r,i;for(;;){i=this._next();if(i===t)break;r=e(i);if(r!==!0)break;n.push(i)}return this._list=this._value=n,this._fn=[],this._i=0,this.length=this._list.length,this},s.zero=function(){return new i([])},s.zipWith=function(e,t){return i.zipWith(e,t,this._list)},s.all=function(e){var n,r=this.length;while(r-->0){n=this._next();if(n===t)break;if(e(n)===!1)return this._r(!1)}return this._r(!0)},s.and=function(){var e,n=this.length;while(n-->0){e=this._next();if(e===t)break;if(!e)return this._r(!1)}return this._r(!0)},s.any=function(e){var n,r=this.length;while(r-->0){n=this._next();if(n===t)break;if(e(n)===!0)return this._r(!0)}return this._r(!1)},s.at=function(e){e=e<0?this.length+e:e;if(e<0)return this._r(null);while(--e>=0)if(this._next()===t)return this._r(null);var n=this._next();return this._r(n===t?null:n)},s.chain=function(e){if(typeof e!="function")throw new TypeError("Chain argument must be a function");var t=e(this._value||this._list);return t instanceof i?t:new i(t.length?t:[t])},s.foldl=function(e){var n,r,i=this.length;n=this._next();if(n===t)return this._r(null);while(i-->0){r=this._next();if(r===t)break;n=e(n,r)}return this._r(n)},s.elem=function(e){var n,r=this.length,i=isNaN(e);while(r-->0){n=this._next();if(n===t)break;if(n===e)return this._r(e!==0||1/e===1/n);if(i&&e!==e&&n!==n)return this._r(!0)}return this._r(!1)},s.head=function(){var e=this._next();return this._r(e===t?null:e)},s.last=function(){var e=-1,n,r;while(++e<this.length){r=this._next();if(r===t)break;n=r}return this._r(n)},s.nil=function(){var e;if(this.length===0)return this._r(!0);var n=this.length;while(n-->0){e=this._next();if(e===t)break;if(e!=null)return this._r(!1)}return this._r(!0)},s.max=function(e){return i.max(this.$(),e)},s.min=function(e){return i.min(this.$(),e)},s.or=function(){var e,n=this.length;while(n-->0){e=this._next();if(e===t)break;if(!!e)return this._r(!0)}return this._r(!1)},s.$=s.toArray=function(){if(this._value)return this._value;var e=[],n,r=this.length;while(r>0){n=this._next();if(n===t)break;e.push(n),r-=1}return this._value=e,this._fn=[],this._i=0,e},s.toString=function(e){typeof e!="string"&&(e="");if(this._value)return this._value.join(e);var n="",r,i;for(;;){r=this._next();if(r===t)break;n+=r,i=this._next();if(i===t)break;n+=e+i}return this._value=n,this._fn=[],this._i=0,n},s.unlines=function(){var e="",n,r;for(;;){n=this._next();if(n===t)break;e+=n,r=this._next();if(r===t)break;e+="\n"+r}return e},s.unwords=function(){var e="",n,r;for(;;){n=this._next();if(n===t)break;e+=n,r=this._next();if(r===t)break;e+=" "+r}return e},i.concatMap=function(e,t){var n=t.length,r=-1,s=[];while(++r<n)s.push.apply(s,e(t[r]));var o=new i(s);return o._value=s,o},i.cycle=function(e){var t=new i(e),n=e.length;return t.length=Infinity,t._next=function(){return this._i===n&&(this._i=0),r.call(this)},t},i.flatten=function(e,t){var n=[];if(!e)return n;var r,s=-1,o=e.length;while(++s<o)r=e[s],Array.isArray(r)?n.push.apply(n,t?r:i.flatten(r)):n.push(r);return n},i.foldl=function(e,n){if(!n)return null;var r,s=n[0],o=0,u=n.length;if(n instanceof i){o=n.length,s=n._next();if(s===t)return null;while(o-->0){r=n._next();if(r===t)break;s=e(s,r)}}else while(++o<u)s=e(s,n[o]);return s},i.iterate=function(e,t){var n=new i([]),s;return n.length=Infinity,n._next=function(){return s=e(s)||t,this._list.push(s),r.call(this)},n},i.lines=function(e){return new i(e.split("\n"))},i.max=function(e,t){if(!e)return null;var n,r=-Infinity,i=-1,s=e.length;if(t)while(++i<s)n=t(e[i]),n>r&&(r=n);else while(++i<s)n=e[i],n>r&&(r=n);return r},i.min=function(e,t){if(!e)return null;var n,r=Infinity,i=-1,s=e.length;if(t)while(++i<s)n=t(e[i]),n<r&&(r=n);else while(++i<s)n=e[i],n<r&&(r=n);return r},i.of=function(e){return new i(e)},i.range=function(e,t){var n=new i([]);return n.length=t,n.pre=function(t){this._list[t]=t+e},n},i.repeat=function(e){var t=new i([]);return t.length=Infinity,t._next=function(){return this._list.push(e),r.call(this)},t},i.replicate=function(e,t){var n=new i([]);return n.length=e,n.pre=function(e){this._list[e]=t},n},i.words=function(e){return new i(e.split(" "))},i.zero=function(){return new i([])},i.zipWith=function(e,n,s){var o=new i([]);return o.length=n.length<s.length?n.length:s.length,n instanceof i||s instanceof i?(n instanceof i||(n=i(n)),s instanceof i||(s=i(s)),o._next=function(){return this._list.push(e(n._next(),s._next())),r.call(this)},o):(o._next=function(){return this._i>=this.length?t:e(n[this._i],s[this._i++])},o)},i.flip=function(e,t){return t},i.identity=function(e){return e},i.not=function(e){return!e},typeof module!="undefined"?module.exports=i:e.lz=i})(this)
