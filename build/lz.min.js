function lz(a){this.fn=[],this.i=0,this.length=a.length,this.list=a;if(!(this instanceof lz))return new lz(a)}var UNDEFINED=new Object,FALSE=new Object;Object.defineProperty(Array.prototype,"lz",{value:function(){return new lz(this)},enumerable:!1}),lz.prototype.next=function(){var a=this.list[this.i++];if(this.i>this.length)return UNDEFINED;for(var b=0;b<this.fn.length;b+=1){a=this.fn[b](a);if(a===FALSE)return this.next()}return a},lz.prototype.prev=function(){var a=this.list[--this.i];if(this.i===-1)return UNDEFINED;for(var b=0;b<this.fn.length;b+=1){a=this.fn[b](a);if(a===FALSE)return this.prev()}return a},lz.prototype.filter=function(a){return this._value=null,this.fn.push(function(b){return a(b)===!0?b:FALSE}),this},lz.prototype.map=function(a){return this._value=null,this.fn.push(function(b){return a(b)}),this},lz.prototype.head=function(){var a;return(a=this.next())===UNDEFINED?null:a},lz.prototype.last=function(){var a;return this.i=this.length,(a=this.prev())===UNDEFINED?null:a},lz.prototype.and=function(){var a;for(;;){a=this.next();if(a===!1)return!1;if(a===UNDEFINED)break}return!0},lz.prototype.init=function(){var a=[],b,c=this.length;while(c>0){b=this.next();if(b===UNDEFINED)break;a.push(b),c-=1}return a.pop(),this.list=this._value=a,this.fn=[],this.i=0,this.length=this.list.length,this},lz.prototype.tail=function(){var a=[],b,c=this.length;while(c>0){b=this.next();if(b===UNDEFINED)break;a.push(b),c-=1}return a.shift(),this.list=this._value=a,this.fn=[],this.i=0,this.length=this.list.length,this},lz.prototype.foldl=function(a){var b,c;b=this.next();if(b===UNDEFINED)return null;for(;;){c=this.next();if(c===UNDEFINED)break;b=a(b,c)}return b},lz.prototype.has=function(a){var b;for(;;){b=this.next();if(b===UNDEFINED)break;if(b===a)return!0}return!1},lz.prototype.takeWhile=function(a){var b=[],c,d;for(;;){d=this.next();if(d===UNDEFINED)break;c=a(d);if(c===!0)b.push(d);else break}return this.list=this._value=b,this.fn=[],this.i=0,this.length=this.list.length,this},lz.prototype.take=function(a){var b=[],c;while(a>0){c=this.next();if(c===UNDEFINED)break;b.push(c),a-=1}return this.list=this._value=b,this.fn=[],this.i=0,this.length=this.list.length,this},lz.prototype.drop=function(a){this._value=null;var b;while(a>0){b=this.next();if(b===UNDEFINED)break;a-=1}return this.list=this.list.slice(this.i),this.i=0,this.length=this.list.length,this},lz.prototype.all=function(){var a=[],b,c=this.length;while(c>0){b=this.next();if(b===UNDEFINED)break;a.push(b),c-=1}return this.list=this._value=a,this.fn=[],this.i=0,this.length=this.list.length,this},lz.prototype.zipWith=function(a,b){return lz.zipWith(a,b,this.list)},lz.prototype.cycle=function(){return lz.cycle(this.list)},lz.prototype.$=lz.prototype.toArray=function(){if(this._value)return this._value;var a=[],b,c=this.length;while(c>0){b=this.next();if(b===UNDEFINED)break;a.push(b),c-=1}return this._value=a,a},lz.range=function(a,b){var c=new lz([]);return c.length=b,c._next=c.next,c.next=function(){return this.list.push(this.i+a),c._next()},c},lz.cycle=function(a){var b=new lz(a),c=a.length;return b.length=Infinity,b._next=b.next,b.next=function(){return this.i===c&&(this.i=0),this._next()},b},lz.zipWith=function(a,b,c){var d=new lz([]);return d.length=b.length<c.length?b.length:c.length,b instanceof lz||c instanceof lz?(b instanceof lz||(b=lz(b)),c instanceof lz||(c=lz(c)),d._next=d.next,d.next=function(){return this.list.push(a(b.next(),c.next())),this._next()},d):(d.next=function(){return this.i>=this.length?UNDEFINED:a(b[this.i],c[this.i++])},d)},module.exports=lz