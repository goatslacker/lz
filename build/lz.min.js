(function(a){function d(a){if(this instanceof d)this._fn=[],this._i=0,this._list=a,this.length=a.length;else return new d(a)}"use strict";var b={},c={};Object.defineProperty(Array.prototype,"lz",{value:function(){return new d(this)}});var e=d.prototype;e.$=e.toArray=function(){if(this._value)return this._value;var a=[],c,d=this.length;while(d>0){c=this.next();if(c===b)break;a.push(c),d-=1}return this._value=a,a},e.compact=function(){return this._value=null,this._fn.push(function(a){return a?a:c}),this},e.concat=function(a){if(a instanceof d){var b=this.length;this.length+=a.length,this._fn.push(function(c){return this._i>b&&(c=a.next(),this._list.push(c)),c}.bind(this))}else this._list.push.apply(this._list,a),this.length=this._list.length;return this},e.cycle=function(){return d.cycle(this._list)},e.drop=function(a){this._value=null;var c;while(a-->0){c=this.next();if(c===b)return this._value=[],this}return this._list=this._list.slice(this._i),this._i=0,this.length=this._list.length,this},e.dropWhile=function(a){this._value=null;var c;for(;;){c=this.next();if(c===b)return this._value=[],this;if(a(c)===!1)break}return this._list=this._list.slice(this._i-1),this._i=0,this.length=this._list.length,this},e.filter=function(a){return this._value=null,this._fn.push(function(b){return a(b)===!0?b:c}),this},e.init=function(){var a=[],c,d=this.length;while(--d>0){c=this.next();if(c===b)break;a.push(c)}return this._list=this._value=a,this._fn=[],this._i=0,this.length=this._list.length,this},e.map=function(a){return this._value=null,this._fn.push(function(b){return a(b)}),this},e.next=function(){this.pre&&this.pre(this._i);var a=this._list[this._i++];if(this._i>this.length)return b;for(var d=0;d<this._fn.length;d+=1){a=this._fn[d](a);if(a===c)return this.next()}return a},e.prev=function(){this.pre&&this.pre(this._i-1);var a=this._list[--this._i];if(this._i===-1)return b;for(var d=0;d<this._fn.length;d+=1){a=this._fn[d](a);if(a===c)return this.prev()}return a},e.scanl=function(a){this._value=null;var b;return this._fn.push(function(c){return b=a(b,c)||c}),this},e.sort=Array.prototype.sort,e.tail=function(){var a=[],c,d=this.length;this.next();while(--d>0){c=this.next();if(c===b)break;a.push(c)}return this._list=this._value=a,this._fn=[],this._i=0,this.length=this._list.length,this},e.take=function(a){var c=[],d;while(a-->0){d=this.next();if(d===b)break;c.push(d)}return this._list=this._value=c,this._fn=[],this._i=0,this.length=this._list.length,this},e.takeWhile=function(a){var c=[],d,e;for(;;){e=this.next();if(e===b)break;d=a(e);if(d===!0)c.push(e);else break}return this._list=this._value=c,this._fn=[],this._i=0,this.length=this._list.length,this},e.zipWith=function(a,b){return d.zipWith(a,b,this._list)},e.and=function(){var a,c=this.length;while(c-->0){a=this.next();if(a===b)break;if(a===!1)return!1}return!0},e.all=function(a){var c,d=this.length;while(d-->0){c=this.next();if(c===b)break;if(a(c)===!1)return!1}return!0},e.any=function(a){var c,d=this.length;while(d-->0){c=this.next();if(c===b)break;if(a(c)===!0)return!0}return!1},e.at=function(a){while(--a>1)if(this.next()===b)return null;var c;return(c=this.next())===b?null:c},e.flatten=function(){return d.flatten(this.$())},e.foldl=function(a){var c,d,e=this.length;c=this.next();if(c===b)return null;while(e-->0){d=this.next();if(d===b)break;c=a(c,d)}return c},e.elem=function(a){var c,d=this.length;while(d-->0){c=this.next();if(c===b)break;if(c===a)return!0}return!1},e.head=function(){var a;return(a=this.next())===b?null:a},e.last=function(){var a;return this._i=this.length,(a=this.prev())===b?null:a},e.nil=function(){var a;if(this.length===0)return!0;var c=this.length;while(c-->0){a=this.next();if(a===b)break;if(a!=null)return!1}return!0},e.max=function(){return d.max(this.$())},e.min=function(){return d.min(this.$())},e.notElem=function(a){var c,d=this.length;while(d-->0){c=this.next();if(c===b)break;if(c===a)return!1}return!0},e.or=function(){var a,c=this.length;while(c-->0){a=this.next();if(a===b)break;if(a===!0)return!0}return!1},e.unlines=function(){var a="",c,d;for(;;){c=this.next();if(c===b)break;a+=c,d=this.next();if(d===b)break;a+="\n"+d}return a},e.unwords=function(){var a="",c,d;for(;;){c=this.next();if(c===b)break;a+=c,d=this.next();if(d===b)break;a+=" "+d}return a},d.cycle=function(a){var b=new d(a),c=a.length;return b.length=Infinity,b._next=b.next,b.next=function(){return this._i===c&&(this._i=0),this._next()},b},d.flatten=function(a,b){var c=[];if(!a)return c;var e,f=-1,g=a.length;while(++f<g)e=a[f],Array.isArray(e)?c.push.apply(c,b?e:d.flatten(e)):c.push(e);return c},d.foldl=function(a,c){if(!c)return null;var e,f=c[0],g=0,h=c.length;if(c instanceof d){g=c.length,f=c.next();if(f===b)return null;while(g-->0){e=c.next();if(e===b)break;f=a(f,e)}}else while(++g<h)f=a(f,c[g]);return f},d.iterate=function(a,b){var c=new d([]),e;return c.length=Infinity,c._next=c.next,c.next=function(){return e=a(e)||b,this._list.push(e),this._next()},c},d.lines=function(a){return new d(a.split("\n"))},d.max=function(a,b){if(!a)return null;var c,d=-Infinity,e=-1,f=a.length;if(b)while(++e<f)c=b(a[e]),c>d&&(d=c);else while(++e<f)c=a[e],c>d&&(d=c);return d},d.min=function(a,b){if(!a)return null;var c,d=Infinity,e=-1,f=a.length;if(b)while(++e<f)c=b(a[e]),c<d&&(d=c);else while(++e<f)c=a[e],c<d&&(d=c);return d},d.range=function(a,b){var c=new d([]);return c.length=b,c.pre=function(b){this._list[b]=b+a},c},d.repeat=function(a){var b=new d([]);return b.length=Infinity,b._next=b.next,b.next=function(){return this._list.push(a),this._next()},b},d.replicate=function(a,b){var c=new d([]);return c.length=a,c.pre=function(a){this._list[a]=b},c},d.words=function(a){return new d(a.split(" "))},d.zipWith=function(a,c,e){var f=new d([]);return f.length=c.length<e.length?c.length:e.length,c instanceof d||e instanceof d?(c instanceof d||(c=d(c)),e instanceof d||(e=d(e)),f._next=f.next,f.next=function(){return this._list.push(a(c.next(),e.next())),this._next()},f):(f.next=function(){return this._i>=this.length?b:a(c[this._i],e[this._i++])},f)},d.fp={},d.fp.flip=function(a,b){return b},d.fp.identity=function(a){return a},d.fp.not=function(a){return!a},d.fp.curry=function(a){return a.length<1?a:function(b){return b==null&&(b=[]),function(c){xargs=b.concat(c);if(xargs.length<a.length)return curry(a);a.apply(a,xargs)}}},typeof module!="undefined"?module.exports=d:a.lz=d}).call(this)